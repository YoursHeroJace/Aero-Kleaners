<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Member Panel</title>
<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #111;
  color: #eee;
}
.app {
  display: flex;
  min-height: 100vh;
}
.sidebar {
  width: 260px;
  background: #222;
  padding: 20px;
}
.sidebar button {
  display: block;
  width: 100%;
  margin: 6px 0;
  padding: 10px;
  background: #333;
  color: #eee;
  border: none;
  cursor: pointer;
}
.main {
  flex: 1;
  padding: 20px;
}
.card {
  background: #222;
  padding: 12px;
  margin-bottom: 12px;
  border-radius: 8px;
}
.card h3 {
  margin: 0 0 8px 0;
  color: #0ff;
}
.item-list {
  list-style: none;
  padding: 0;
  margin: 0;
}
.item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 0;
  border-bottom: 1px solid #333;
}
input, textarea {
  width: 100%;
  margin: 6px 0;
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #444;
  background: #111;
  color: #eee;
}
button.icon-btn {
  background: #0ff;
  border: none;
  padding: 6px 10px;
  cursor: pointer;
  color: #000;
  border-radius: 6px;
  margin-left: 6px;
}
</style>
</head>
<body>

<div class="app">

<!-- Sidebar -->
<div class="sidebar">
  <h2>Menu</h2>
  <button onclick="showSection('dashboard')">Dashboard</button>
  <button onclick="showSection('meetings')">Meetings</button>
  <button onclick="showSection('sessions')">Sessions</button>
  <button onclick="showSection('resources')">Documents</button>
  <button onclick="showSection('recent')">Recent Activity</button>
  <button onclick="showSection('other')">Other Info</button>
  <button onclick="showSection('members')">Add Members</button>
  <button onclick="logout()">Logout</button>
</div>

<!-- Main Content -->
<div class="main">

  <h1>Welcome, <span id="userName">Member</span></h1>

  <!-- Dashboard -->
  <div id="dashboard" class="section">
    <div class="card">
      <h3>Dashboard</h3>
      <p>Quick overview of club activities.</p>
    </div>
  </div>

  <!-- Meetings -->
  <div id="meetings" class="section" style="display:none;">
    <div class="card">
      <h3>Meetings</h3>
      <ul class="item-list" id="meetingList"></ul>

      <!-- Admin Form -->
      <div id="adminMeetingForm" style="display:none;">
        <input type="text" id="meetingTitle" placeholder="Meeting Title">
        <input type="url" id="meetingLink" placeholder="Meeting Link">
        <button onclick="addMeeting()">Add Meeting</button>
      </div>
    </div>
  </div>

  <!-- Sessions -->
  <div id="sessions" class="section" style="display:none;">
    <div class="card">
      <h3>Sessions</h3>
      <ul class="item-list" id="sessionList"></ul>

      <!-- Admin Form -->
      <div id="adminSessionForm" style="display:none;">
        <input type="text" id="sessionTitle" placeholder="Session Title">
        <input type="text" id="sessionHost" placeholder="Host Name">
        <button onclick="addSession()">Add Session</button>
      </div>
    </div>
  </div>

  <!-- Resources/Documents -->
  <div id="resources" class="section" style="display:none;">
    <div class="card">
      <h3>Documents / Resources</h3>
      <ul class="item-list" id="resourceList"></ul>

      <!-- Admin Form -->
      <div id="adminResourceForm" style="display:none;">
        <input type="text" id="resourceTitle" placeholder="Document Title">
        <input type="url" id="resourceLink" placeholder="Document Link">
        <button onclick="addResource()">Add Document</button>
      </div>
    </div>
  </div>

  <!-- Recent Activity -->
  <div id="recent" class="section" style="display:none;">
    <div class="card">
      <h3>Recent Activity</h3>
      <ul class="item-list" id="recentList"></ul>

      <!-- Admin Form -->
      <div id="adminRecentForm" style="display:none;">
        <input type="text" id="recentText" placeholder="Activity Description">
        <button onclick="addRecent()">Add Activity</button>
      </div>
    </div>
  </div>

  <!-- Other Info -->
  <div id="other" class="section" style="display:none;">
    <div class="card">
      <h3>Other Information</h3>
      <ul class="item-list" id="otherList"></ul>

      <!-- Admin Form -->
      <div id="adminOtherForm" style="display:none;">
        <input type="text" id="otherText" placeholder="Other Info">
        <button onclick="addOther()">Add Info</button>
      </div>
    </div>
  </div>

  <!-- Add Members -->
  <div id="members" class="section" style="display:none;">
    <div class="card">
      <h3>Add New Member</h3>
      <div id="adminMemberForm" style="display:none;">
        <input type="text" id="newMemberName" placeholder="Member Name">
        <input type="text" id="newMemberPhone" placeholder="Phone Number">
        <button onclick="addMember()">Add Member</button>
      </div>
    </div>
  </div>

</div>
</div>

<script>
// ----- Users -----
const admins = ["Dhruv","Harshit Panwar","Shahil Shivam"];
let currentUser = sessionStorage.getItem('name') || "Guest";

// ----- Initialize -----
document.getElementById('userName').textContent = currentUser;

// Show admin forms if current user is admin
if(admins.includes(currentUser)){
  document.getElementById('adminMeetingForm').style.display = "block";
  document.getElementById('adminSessionForm').style.display = "block";
  document.getElementById('adminResourceForm').style.display = "block";
  document.getElementById('adminRecentForm').style.display = "block";
  document.getElementById('adminOtherForm').style.display = "block";
  document.getElementById('adminMemberForm').style.display = "block";
}

// ----- Sections -----
function showSection(id){
  document.querySelectorAll('.section').forEach(sec=>sec.style.display="none");
  document.getElementById(id).style.display = "block";
}

// ----- Storage -----
let meetings = [];
let sessions = [];
let resources = [];
let recent = [];
let otherInfo = [];
let members = [];

// ----- Add Functions -----
function addMeeting(){
  const title = document.getElementById('meetingTitle').value;
  const link = document.getElementById('meetingLink').value;
  if(!title || !link) return alert("Enter title and link");
  meetings.push({title, link});
  renderMeetings();
}

function addSession(){
  const title = document.getElementById('sessionTitle').value;
  const host = document.getElementById('sessionHost').value;
  if(!title || !host) return alert("Enter title and host");
  sessions.push({title, host});
  renderSessions();
}

function addResource(){
  const title = document.getElementById('resourceTitle').value;
  const link = document.getElementById('resourceLink').value;
  if(!title || !link) return alert("Enter title and link");
  resources.push({title, link});
  renderResources();
}

function addRecent(){
  const text = document.getElementById('recentText').value;
  if(!text) return alert("Enter text");
  recent.push({text});
  renderRecent();
}

function addOther(){
  const text = document.getElementById('otherText').value;
  if(!text) return alert("Enter text");
  otherInfo.push({text});
  renderOther();
}

function addMember(){
  if(!admins.includes(currentUser)) return alert("Only admins can add members");
  const name = document.getElementById('newMemberName').value;
  const phone = document.getElementById('newMemberPhone').value;
  if(!name || !phone) return alert("Enter name and phone");
  members.push({name, phone});
  alert(`Member ${name} added`);
}

// ----- Render Functions -----
function renderMeetings(){
  const ul = document.getElementById('meetingList');
  ul.innerHTML = "";
  meetings.forEach((m,i)=>{
    const li = document.createElement('li');
    li.innerHTML = `<span>${m.title}</span> 
                    <a href="${m.link}" target="_blank">Link</a>` +
                    (admins.includes(currentUser) ? 
                      `<button class="icon-btn" onclick="deleteMeeting(${i})">Delete</button>` : "");
    ul.appendChild(li);
  });
}

function deleteMeeting(index){
  meetings.splice(index,1);
  renderMeetings();
}

function renderSessions(){
  const ul = document.getElementById('sessionList');
  ul.innerHTML = "";
  sessions.forEach((s,i)=>{
    const li = document.createElement('li');
    li.innerHTML = `<span>${s.title} (Host: ${s.host})</span>` +
      (admins.includes(currentUser) ? `<button class="icon-btn" onclick="deleteSession(${i})">Delete</button>` : "");
    ul.appendChild(li);
  });
}

function deleteSession(index){ sessions.splice(index,1); renderSessions(); }

function renderResources(){
  const ul = document.getElementById('resourceList');
  ul.innerHTML = "";
  resources.forEach((r,i)=>{
    const li = document.createElement('li');
    li.innerHTML = `<span>${r.title}</span> <a href="${r.link}" target="_blank">Link</a>` +
      (admins.includes(currentUser) ? `<button class="icon-btn" onclick="deleteResource(${i})">Delete</button>` : "");
    ul.appendChild(li);
  });
}

function deleteResource(index){ resources.splice(index,1); renderResources(); }

function renderRecent(){
  const ul = document.getElementById('recentList');
  ul.innerHTML = "";
  recent.forEach((r,i)=>{
    const li = document.createElement('li');
    li.innerHTML = `<span>${r.text}</span>` +
      (admins.includes(currentUser) ? `<button class="icon-btn" onclick="deleteRecent(${i})">Delete</button>` : "");
    ul.appendChild(li);
  });
}

function deleteRecent(index){ recent.splice(index,1); renderRecent(); }

function renderOther(){
  const ul = document.getElementById('otherList');
  ul.innerHTML = "";
  otherInfo.forEach((r,i)=>{
    const li = document.createElement('li');
    li.innerHTML = `<span>${r.text}</span>` +
      (admins.includes(currentUser) ? `<button class="icon-btn" onclick="deleteOther(${i})">Delete</button>` : "");
    ul.appendChild(li);
  });
}

function deleteOther(index){ otherInfo.splice(index,1); renderOther(); }

// ----- Logout -----
function logout(){ sessionStorage.clear(); location.reload(); }
</script>

</body>
</html>
